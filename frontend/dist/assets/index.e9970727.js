var M=Object.defineProperty,O=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var E=(r,n,o)=>n in r?M(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o,x=(r,n)=>{for(var o in n||(n={}))U.call(n,o)&&E(r,o,n[o]);if(A)for(var o of A(n))I.call(n,o)&&E(r,o,n[o]);return r},v=(r,n)=>O(r,P(n));import{R as F,l as t,r as B,j as c,T as z,a as e,b as f,c as T,t as D,L as S,M as H,d as _,S as G,i as N,F as q,A as J,B as K,e as V,f as W,g as k,h as X,k as C,m as Q,n as Y}from"./vendor.a2f3a7f0.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}};Z();const ee=({data:r})=>{const n=F.useMemo(()=>r,[]),o=F.useMemo(()=>t.exports.map(Object.keys(t.exports.get(r,"0")),l=>({Header:t.exports.startCase(l),accessor:l})),[]),{getTableProps:h,getTableBodyProps:a,headerGroups:s,rows:u,prepareRow:m}=B.exports.useTable({columns:o,data:n});return c(z,v(x({striped:!0,bordered:!0,hover:!0,size:"sm"},h()),{children:[e("thead",{children:s.map(l=>e("tr",v(x({},l.getHeaderGroupProps()),{children:l.headers.map(p=>e("th",v(x({},p.getHeaderProps()),{children:p.render("Header")})))})))}),e("tbody",{children:u.map((l,p)=>(m(l),e("tr",v(x({},l.getRowProps()),{children:l.cells.map(y=>e("td",v(x({},y.getCellProps()),{children:y.render("Cell")})))}))))})]}))},te=()=>{const[r,n]=f.exports.useState({}),o=()=>{T.get("https://intense-island-19970.herokuapp.com/api/depot/distance").then(a=>{console.log("SUCCESS",a),n(a.data)}).catch(a=>{console.log(a),D(t.exports.get(a,"matrix.errorDetails.0","Failed to fetch"))})},h=()=>{const a=t.exports.get(r,"matrix.resourceSets.0.resources.0.results",[]),s=t.exports.get(r,"origins",[]),u=t.exports.get(r,"destinations",[]);return Object.values(t.exports.reduce(a,(m,l)=>(m[t.exports.get(s,`${t.exports.get(l,"originIndex")}.name`)]?m[t.exports.get(s,`${t.exports.get(l,"originIndex")}.name`)]=v(x({},m[t.exports.get(s,`${t.exports.get(l,"originIndex")}.name`)]),{name:t.exports.get(s,`${t.exports.get(l,"originIndex")}.name`),[t.exports.get(u,`${t.exports.get(l,"destinationIndex")}.name`)]:t.exports.get(l,"travelDistance")}):m[t.exports.get(s,`${t.exports.get(l,"originIndex")}.name`)]={name:t.exports.get(s,`${t.exports.get(l,"originIndex")}.name`),[t.exports.get(u,`${t.exports.get(l,"destinationIndex")}.name`)]:t.exports.get(l,"travelDistance")},m),{}))};return f.exports.useEffect(()=>{o()},[]),c("div",{children:[t.exports.isEmpty(r)&&e("div",{className:"w-screen flex items-center justify-center",style:{height:"calc(100vh - 100px)"},children:"No Records to Show"}),!t.exports.isEmpty(r)&&e("div",{className:"w-screen flex items-center justify-center",style:{height:"calc(100vh - 100px)"},children:e(ee,{data:h()})})]})};var R="/assets/marker-depot.2a20aee4.svg",$="/assets/marker.2e0e4529.svg";function re(){const[r,n]=f.exports.useState(null),[o,h]=f.exports.useState([]),[a,s]=f.exports.useState({});let u=S.icon({iconUrl:$,iconRetinaUrl:$,iconAnchor:[5,55],popupAnchor:[10,-44],iconSize:[25,55]}),m=S.icon({iconUrl:R,iconRetinaUrl:R,iconAnchor:[5,55],popupAnchor:[10,-44],iconSize:[25,55]});const l=()=>{T.get("https://intense-island-19970.herokuapp.com/api/depot").then(p=>{console.log("SUCCESS",p),h(p.data)}).catch(p=>{console.log(p)})};return f.exports.useEffect(()=>{if(!r||t.exports.isEmpty(o))return;const p=[];o.forEach(g=>{const w=S.marker({lat:g.latitude,lng:g.longitude},{icon:g.type==="depot"?u:m}).bindPopup(`<div>Type: ${g.type}<br/> Name: <span>${g.name}<span><div>`).addEventListener("click",j=>{console.log(g),s(g)});p.push(w)});var y=S.featureGroup(p).addTo(r);r.fitBounds(y.getBounds())},[r]),f.exports.useEffect(()=>{l()},[]),c("div",{className:"App",children:[t.exports.isEmpty(o)&&e("div",{className:"w-screen flex items-center justify-center",style:{height:"calc(100vh - 100px)"},children:"No Records to Show"}),!t.exports.isEmpty(o)&&e(H,{whenCreated:n,center:[51.505,-.09],zoom:14,children:e(_,{attribution:'\xA9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xA9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xA9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png"})})]})}const ae=[{value:"depot",label:"Depot"},{value:"terminal",label:"Terminal"}],se=()=>{const[r,n]=f.exports.useState({}),[o,h]=f.exports.useState(),a={name:"",latitude:"",longitude:""},[s,u]=f.exports.useReducer((i,d)=>typeof d=="number"||d===0?a:x(x({},i),d),a),{name:m,latitude:l,longitude:p}=s;function y(i){i.preventDefault();const{name:d,value:b}=i.target;u({[d]:b})}const g=i=>{if((i[0].name||"").endsWith("geojson")){const b=new FileReader;b.readAsText(i[0],"UTF-8"),b.onload=L=>{n(JSON.parse(L.target.result))}}},w=i=>{T.post("https://intense-island-19970.herokuapp.com/api/depot/add/bulk",i).then(d=>{console.log("SUCCESS",d),D("Successfully uploaded")}).catch(d=>{console.log(d),D("Failed to uploaded")})},j=i=>{if(i.preventDefault(),!N(o))if(N(r)){if(N(s.name)||N(s.latitude)||N(s.longitude))return;w([x({type:o},s)])}else{const d=t.exports.map(t.exports.get(r,"features"),b=>({name:t.exports.get(b,"properties.Name"),latitude:t.exports.get(b,"geometry.coordinates.1"),longitude:t.exports.get(b,"geometry.coordinates.0"),type:o}));w(d)}};return e("div",{className:"w-screen flex items-center justify-center",style:{height:"calc(100vh - 100px)"},children:c("div",{className:"bg-white rounded shadow border p-6 flex flex-col w-4/12",children:[e("div",{className:"text-xl mb-8",children:"Add/Upload"}),e(G,{options:ae,placeholder:"Select Type",onChange:i=>{h(i.value)}}),N(r)?e(q,{onDrop:(i,d)=>{d.preventDefault(),g(i)},children:c("div",{className:"grid justify-center dgap-y-1 py-2 text-center",children:[e("p",{children:"Drag & Drop File here"}),e("p",{children:"or"}),c("label",{htmlFor:"same",className:"bg-black text-white text-center py-1 w-24 mx-auto cursor-pointer",children:["Browse File",e("input",{id:"same",className:"hidden",type:"file",accept:".geojson",onChange:i=>{g(i.target.files)}})]})]})}):e("div",{className:"flex justify-center space-x-3 overflow-x-auto pb-2 whitespace-nowrap mt-4",children:c("div",{style:{flexShrink:0},className:"w-16 h-16 m-1 relative bg-white rounded-lg flex flex-col justify-between",children:[c("div",{className:"flex flex-col items-center mt-1.5",children:[e(J,{size:20,color:"blue"}),e("div",{className:"select-none",style:{fontSize:"0.5rem"},children:r.name})]}),e("div",{className:"flex justify-center py-0.5 rounded-b-lg",style:{backgroundColor:"#bee8ea"},children:e(K,{color:"green"})}),e(V,{onClick:()=>n({}),className:"absolute -top-1 -right-1"})]})}),e("div",{className:"flex justify-center",children:"or"}),e("div",{children:"Enter Details"}),c("div",{className:"p-2",children:[e("label",{children:"Name"}),e("input",{type:"text",className:"relative outline-none rounded py-3 px-3 w-full bg-white shadow text-sm text-gray-700 placeholder-gray-400 focus:outline-none focus:shadow-outline",placeholder:"name",value:m,onChange:y,name:"name",autoComplete:"off"})]}),e("div",{children:"Coordinates"}),c("div",{className:"p-2",children:[e("label",{children:"Latitude"}),e("input",{type:"text",className:"relative outline-none rounded py-3 px-3 w-full bg-white shadow text-sm text-gray-700 placeholder-gray-400 focus:outline-none focus:shadow-outline",placeholder:"latitude",value:l,onChange:y,name:"latitude"})]}),c("div",{className:"p-2",children:[e("label",{children:"Longitude"}),e("input",{type:"text",className:"relative outline-none rounded py-3 px-3 w-full bg-white shadow text-sm text-gray-700 placeholder-gray-400 focus:outline-none focus:shadow-outline",placeholder:"longitude",value:p,onChange:y,name:"longitude"})]}),e("button",{className:"bg-blue-500 px-4 py-2 text-white",type:"button",onClick:j,children:"Submit"})]})})};function ne(){return c("div",{className:"App",children:[e(W,{}),c("header",{className:"p-4 pb-0 border-b shadow-lg bg-gray-100 md:flex md:items-center md:justify-between md:pb-4",children:[c("div",{className:"mb-4 flex items-center justify-between md:mb-0",children:[e("h1",{className:"leading-none text-2xl text-gray-darkest",children:e("a",{href:"@",className:"no-underline text-gray-darkest hover:text-black",children:"Depot Allocation"})}),e("a",{href:"#",className:"text-black md:hidden hover:text-orange",children:e("i",{className:"fa fa-2x fa-bars"})})]}),e("nav",{children:c("ul",{className:"list-reset md:flex md:items-center",children:[e("li",{className:"md:ml-4",children:e(k,{to:"/",className:"block py-2 text-grey-darkest no-underline md:border-none md:p-0 hover:underline",children:"Home"})}),e("li",{className:"md:ml-4",children:e(k,{to:"/upload",className:"block py-2 text-grey-darkest no-underline md:border-none md:p-0 hover:underline",children:"Add/Upload"})}),e("li",{className:"md:ml-4",children:e(k,{to:"/distance",className:"block py-2 text-grey-darkest no-underline md:border-none md:p-0 hover:underline",children:"Distance Matrix"})})]})})]}),c(X,{children:[e(C,{path:"/",element:e(re,{})}),e(C,{path:"/upload",element:e(se,{})}),e(C,{path:"/distance",element:e(te,{})})]})]})}Q.render(e(Y,{children:e(ne,{})}),document.getElementById("root"));
